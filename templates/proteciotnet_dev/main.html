{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <title>ProtecIoTnet</title>
    <link rel="shortcut icon" type="image/png" href="{% static 'img/favicon.png' %}">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

    <link rel="stylesheet" href="{% static "css/icon.css" %}">
    <link rel="stylesheet" href="{% static "cdn/fontawesome/css/all.css" %}">
    <link rel="stylesheet" href="{% static "css/materialize.min.css" %}" media="screen,projection"/>
    <link rel="stylesheet" href="{% static "css/proteciotnet_style.css" %}">

    <script src="{% static "js/jquery.min.js" %}"></script>
    <script src="{% static "js/Chart.min.js" %}"></script>
    <script src="{% static "js/clipboard.min.js" %}"></script>
    <script src="{% static "js/sweetalert.min.js" %}"></script>
    <script src="{% static "js/async.js" %}"></script>

    <script>
        window.onscroll = function () {
            scrollFunction()
        };

        function scrollFunction() {
            if (document.body.scrollTop > 50 || document.documentElement.scrollTop > 50) {
                $('#backToTopBtn').fadeIn();
            } else {
                $('#backToTopBtn').fadeOut();
            }
        }

        function topFunction() {
            document.body.scrollTop = 0;                // For Safari
            document.documentElement.scrollTop = 0;     // For Chrome, Firefox, IE and Opera
        }

        document.addEventListener("DOMContentLoaded", function () {
            const toggleCheckbox = document.getElementById("modeToggle");

            toggleCheckbox.addEventListener("change", function () {
                csrftoken = $('input[name="csrfmiddlewaretoken"]').val();
                $.post('/set_online_state', {
                    'csrfmiddlewaretoken': csrftoken,
                    'online_status': toggleCheckbox.checked
                }).done(function (d) {
                    if (typeof (d['error']) != 'undefined') {
                        console.log("ERROR setting toggle");
                    } else {
                        console.log("SUCCESS setting toggle");
                    }
                });
            });
        });

    </script>

    <style>
        .background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        {#background-image: url({% static "/img/14.svg" %});#} background-image: url({% static "/img/bg5.png" %});
            background-size: cover;
            background-repeat: no-repeat;
            opacity: 1; /* Adjust the opacity to dim the background */
            z-index: -99; /* Place the background behind other elements */

        }
    </style>
</head>

<body>

<div class="background"></div>

<div class="navbar-fixed">
    <nav class="" id="topnavbar" style="background-color:rgba(10,10,10,0.0);box-shadow:none;">
        <div class="nav-wrapper">
            <div class="row no-margin">
                <div class="col s1 hide-on-large-only" style="max-width:60px;">
                    <a href="#!" onclick="javascript:$('.sidenav').sidenav('open');"><i
                            class="material-icons white-text">menu</i></a>
                </div>
                <div class="col s4">
                    <a href="/setscanfile/unset" class="brand-logo"><img src="/static/logo.png"
                                                                         style="max-width:200px;margin-top:8px;"
                                                                         alt="logo ProtecIoTnet"></a>

                </div>

                {#                <div class="col s4">#}
                {#                    <form onsubmit="" role="search" class="search_form">#}
                {#                        <input class="search_input" id="search" type="search" placeholder="Search..." autofocus#}
                {#                               required/>#}
                {#                        <button class="nav_search_btn" type="submit">#}
                {#                            <i class="fa fa-search"></i>#}
                {#                        </button>#}
                {#                    </form>#}
                {#                </div>#}


                <div class="col s8">
                    <label class="toggle right">
                        <input id="modeToggle" class="toggle-checkbox" type="checkbox" checked>
                        <div class="toggle-switch"></div>
                        <span class="toggle-label">Offline Mode</span>
                    </label>
                </div>

            </div>

        </div>
    </nav>
</div>


<div class="arrow-up hide-on-med-and-down"></div>
<div class="wm_menu grey-text hide-on-med-and-down show-on-large">
    <ul>
        <li><i class="material-icons">home</i><a href="/setscanfile/unset"> Home</a></li>
        <li><i class="material-icons">wifi</i> <a href="#!" onclick="newscan();">New Nmap scan</a></li>
        <li><i class="material-icons">sensors</i><a href="/">New ZigBee Scan</a></li>
        <li><i class="material-icons">bluetooth</i><a href="/">New Bluetooth Scan</a></li>


        {% if scanfile %}
            <li><i class="fas fa-bug" style="margin-left:2px;font-size:20px;"></i> <a href="#!"  onclick="checkCVE();">Check CVE</a></li>
        {% endif %}

        <li><i class="material-icons">person</i><a href="/about">About</a></li>
        <li>

        </li>

        <li class="wm_line">
            <div>social</div>
        </li>
        <li><i class="fab fa-gitlab"></i> <a href="https://gitlab.com/hweckermann/proteciotnet">GitLab Project</a></li>

        <li><i class="fas fa-star"></i> <a href="https://gitlab.com/hweckermann/proteciotnet" id="gitlabstar">Star this
            project</a></li>
        <li><i class="fas fa-code-branch"></i> <a href="https://gitlab.com/hweckermann/proteciotnet" id="gitlabfork">Fork
            this project</a></li>
    </ul>


</div>


{% if scanfile %}
    <ul id="slide-out" class="sidenav">
        <li>
            <div class="user-view">
                <div class="background" style="text-align:center;">
                    <img src="/static/logoblack.png" style="max-width:200px;margin-top:20px;">
                </div>
                <br>
            </div>
        </li>
        <li><a href="/setscanfile/unset"><i class="material-icons">wifi</i>Show all Nmap scan</a></li>
        <li><a href="/"><i class="material-icons">info</i>Show scan details</a></li>

        <li>
            <div class="divider"></div>
        </li>
        <li><a class="subheader">Support ProtecIotnet on GitLab</a></li>
        <li style="padding-left:30px;margin-top:-20px;"><i class="fab fa-gitlab"></i> <a
                href="https://gitlab.com/hweckermann/proteciotnet">GitLab Project</a></li>
        <li style="padding-left:30px;margin-top:-20px;"><i class="fas fa-star"></i> <a
                href="https://gitlab.com/hweckermann/proteciotnet" id="gitlabstar">Star this project</a></li>
        <li style="padding-left:30px;margin-top:-20px;"><i class="fas fa-code-branch"></i> <a
                href="https://gitlab.com/hweckermann/proteciotnet" id="gitlabfork">Fork this project</a></li>
    </ul>
{% endif %}


{% block content %}
{% endblock %}

<!-- MODAL -->
<div id="modal1" class="modal modal-fixed-footer">
    <div class="modal-content">
        <h4 id="modaltitle">Titel</h4>
        <p id="modalbody">test</p>
    </div>
    <div class="modal-footer" id="modalfooter">
        <a href="#!" class="modal-close waves-effect waves-green btn grey white-text">Ok</a>
    </div>
    {% csrf_token %}
</div>

{{ cpestring|safe }}
<button onclick="topFunction()" class="btn btn-danger btn-floating btn-lg" id="backToTopBtn" title="Go to top"><i
        class="fas fa-arrow-up"></i></button>


<script src="{% static "js/materialize.min.js" %}"></script>
<script>

    $(document).ready(function () {
        $('.sidenav').sidenav();
        $('.modal').modal();
        $('.tabs').tabs();
    });

</script>
</body>
</html>
